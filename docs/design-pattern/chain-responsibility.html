<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- Generated by Apache Maven Doxia Site Renderer 1.7.4 at 2017-11-06 -->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>design-pattern &#x2013; 责任链模式</title>
    <style type="text/css" media="all">
      @import url("./css/maven-base.css");
      @import url("./css/maven-theme.css");
      @import url("./css/site.css");
    </style>
    <link rel="stylesheet" href="./css/print.css" type="text/css" media="print" />
    <meta http-equiv="Content-Language" content="en" />
        
        </head>
  <body class="composite">
    <div id="banner">
                    <div id="bannerLeft">
                design-pattern
                </div>
                    <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="breadcrumbs">
          
                <div class="xleft">
        <span id="publishDate">Last Published: 2017-11-06</span>
                  &nbsp;| <span id="projectVersion">Version: 1.0-SNAPSHOT</span>
                      </div>
            <div class="xright">                    <a href="./" title="design-pattern">design-pattern</a>
            
      </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="leftColumn">
      <div id="navcolumn">
           
                                <h5>Parent Project</h5>
                  <ul>
                  <li class="none">
                          <a href="../index.html" title="java-learn">java-learn</a>
            </li>
          </ul>
                       <h5>Project Documentation</h5>
                  <ul>
                                                                                                                                                                                                                                                        <li class="collapsed">
                          <a href="project-info.html" title="Project Information">Project Information</a>
                  </li>
          </ul>
                             <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
        <img class="poweredBy" alt="Built by Maven" src="./images/logos/maven-feather.png" />
      </a>
                 
            </div>
    </div>
    <div id="bodyColumn">
      <div id="contentBox">
        <h1>&#x8d23;&#x4efb;&#x94fe;&#x6a21;&#x5f0f;</h1>
<div class="section">
<h2><a name="a1_"></a>1 &#x4ecb;&#x7ecd;</h2>
<div class="section">
<h3><a name="a1.1_"></a>1.1 &#x6a21;&#x5f0f;&#x52a8;&#x673a;</h3>

<blockquote>
<p>&#x907f;&#x514d;&#x8bf7;&#x6c42;&#x53d1;&#x9001;&#x8005;&#x4e0e;&#x63a5;&#x6536;&#x8005;&#x8026;&#x5408;&#x5728;&#x4e00;&#x8d77;&#xff0c;&#x8ba9;&#x591a;&#x4e2a;&#x5bf9;&#x8c61;&#x90fd;&#x6709;&#x53ef;&#x80fd;&#x63a5;&#x6536;&#x8bf7;&#x6c42;&#xff0c; &#x5c06;&#x8fd9;&#x4e9b;&#x5bf9;&#x8c61;&#x8fde;&#x63a5;&#x6210;&#x4e00;&#x6761;&#x94fe;&#xff0c;&#x5e76;&#x4e14;&#x6cbf;&#x7740;&#x8fd9;&#x6761;&#x94fe;&#x4f20;&#x9012;&#x8bf7;&#x6c42;&#xff0c;&#x76f4;&#x5230;&#x6709;&#x5bf9;&#x8c61;&#x5904;&#x7406;&#x5b83;&#x4e3a;&#x6b62;&#x3002;</p>
</blockquote></div>
<div class="section">
<h3><a name="a1.2_"></a>1.2 &#x6a21;&#x5f0f;&#x5b9a;&#x4e49;</h3>

<blockquote>
<p>&#x8d23;&#x4efb;&#x94fe;&#x6a21;&#x5f0f;&#xff08;Chain of Responsibility Pattern&#xff09;&#x4e3a;&#x8bf7;&#x6c42;&#x521b;&#x5efa;&#x4e86;&#x4e00;&#x4e2a;&#x63a5;&#x6536;&#x8005;&#x5bf9;&#x8c61;&#x7684;&#x94fe;&#x3002; &#x8fd9;&#x79cd;&#x6a21;&#x5f0f;&#x7ed9;&#x4e88;&#x8bf7;&#x6c42;&#x7684;&#x7c7b;&#x578b;&#xff0c;&#x5bf9;&#x8bf7;&#x6c42;&#x7684;&#x53d1;&#x9001;&#x8005;&#x548c;&#x63a5;&#x6536;&#x8005;&#x8fdb;&#x884c;&#x89e3;&#x8026;&#x3002;&#x8fd9;&#x79cd;&#x7c7b;&#x578b;&#x7684;&#x8bbe;&#x8ba1;&#x6a21;&#x5f0f;&#x5c5e;&#x4e8e;&#x884c;&#x4e3a;&#x578b;&#x6a21;&#x5f0f;&#x3002;</p>
</blockquote></div>
<div class="section">
<h3><a name="a1.3_"></a>1.3 &#x9002;&#x7528;&#x73af;&#x5883;</h3>

<blockquote>
  
<ul>
    
<li>1&#x3001;&#x6709;&#x591a;&#x4e2a;&#x5bf9;&#x8c61;&#x53ef;&#x4ee5;&#x5904;&#x7406;&#x540c;&#x4e00;&#x4e2a;&#x8bf7;&#x6c42;&#xff0c;&#x5177;&#x4f53;&#x54ea;&#x4e2a;&#x5bf9;&#x8c61;&#x5904;&#x7406;&#x8be5;&#x8bf7;&#x6c42;&#x7531;&#x8fd0;&#x884c;&#x65f6;&#x523b;&#x81ea;&#x52a8;&#x786e;&#x5b9a;&#x3002;</li>
    
<li>2&#x3001;&#x5728;&#x4e0d;&#x660e;&#x786e;&#x6307;&#x5b9a;&#x63a5;&#x6536;&#x8005;&#x7684;&#x60c5;&#x51b5;&#x4e0b;&#xff0c;&#x5411;&#x591a;&#x4e2a;&#x5bf9;&#x8c61;&#x4e2d;&#x7684;&#x4e00;&#x4e2a;&#x63d0;&#x4ea4;&#x4e00;&#x4e2a;&#x8bf7;&#x6c42;&#x3002;</li>
    
<li>3&#x3001;&#x53ef;&#x52a8;&#x6001;&#x6307;&#x5b9a;&#x4e00;&#x7ec4;&#x5bf9;&#x8c61;&#x5904;&#x7406;&#x8bf7;&#x6c42;&#x3002;</li>
  </ul>
</blockquote></div>
<div class="section">
<h3><a name="a1.4_"></a>1.4 &#x6a21;&#x5f0f;&#x5e94;&#x7528;</h3>

<blockquote>
  
<ul>
    
<li>1&#x3001;&#x7ea2;&#x697c;&#x68a6;&#x4e2d;&#x7684;&#x201c;&#x51fb;&#x9f13;&#x4f20;&#x82b1;&#x201d;&#x3002;</li>
    
<li>2&#x3001;JS &#x4e2d;&#x7684;&#x4e8b;&#x4ef6;&#x5192;&#x6ce1;&#x3002;</li>
    
<li>3&#x3001;JAVA WEB &#x4e2d; Apache Tomcat &#x5bf9; Encoding &#x7684;&#x5904;&#x7406;&#xff0c;Struts2 &#x7684;&#x62e6;&#x622a;&#x5668;&#xff0c;jsp servlet &#x7684; Filter&#x3002;</li>
  </ul>
</blockquote></div>
<div class="section">
<h3><a name="a1.5_"></a>1.5 &#x4f18;&#x70b9;</h3>

<blockquote>
  
<ul>
    
<li>1&#x3001;&#x964d;&#x4f4e;&#x8026;&#x5408;&#x5ea6;&#x3002;&#x5b83;&#x5c06;&#x8bf7;&#x6c42;&#x7684;&#x53d1;&#x9001;&#x8005;&#x548c;&#x63a5;&#x6536;&#x8005;&#x89e3;&#x8026;&#x3002;</li>
    
<li>2&#x3001;&#x7b80;&#x5316;&#x4e86;&#x5bf9;&#x8c61;&#x3002;&#x4f7f;&#x5f97;&#x5bf9;&#x8c61;&#x4e0d;&#x9700;&#x8981;&#x77e5;&#x9053;&#x94fe;&#x7684;&#x7ed3;&#x6784;&#x3002;</li>
    
<li>3&#x3001;&#x589e;&#x5f3a;&#x7ed9;&#x5bf9;&#x8c61;&#x6307;&#x6d3e;&#x804c;&#x8d23;&#x7684;&#x7075;&#x6d3b;&#x6027;&#x3002;&#x901a;&#x8fc7;&#x6539;&#x53d8;&#x94fe;&#x5185;&#x7684;&#x6210;&#x5458;&#x6216;&#x8005;&#x8c03;&#x52a8;&#x5b83;&#x4eec;&#x7684;&#x6b21;&#x5e8f;&#xff0c;&#x5141;&#x8bb8;&#x52a8;&#x6001;&#x5730;&#x65b0;&#x589e;&#x6216;&#x8005;&#x5220;&#x9664;&#x8d23;&#x4efb;&#x3002;</li>
    
<li>4&#x3001;&#x589e;&#x52a0;&#x65b0;&#x7684;&#x8bf7;&#x6c42;&#x5904;&#x7406;&#x7c7b;&#x5f88;&#x65b9;&#x4fbf;&#x3002;</li>
  </ul>
</blockquote></div>
<div class="section">
<h3><a name="a1.6_"></a>1.6 &#x7f3a;&#x70b9;</h3>

<blockquote>
  
<ul>
    
<li>1&#x3001;&#x4e0d;&#x80fd;&#x4fdd;&#x8bc1;&#x8bf7;&#x6c42;&#x4e00;&#x5b9a;&#x88ab;&#x63a5;&#x6536;&#x3002;</li>
    
<li>2&#x3001;&#x7cfb;&#x7edf;&#x6027;&#x80fd;&#x5c06;&#x53d7;&#x5230;&#x4e00;&#x5b9a;&#x5f71;&#x54cd;&#xff0c;&#x800c;&#x4e14;&#x5728;&#x8fdb;&#x884c;&#x4ee3;&#x7801;&#x8c03;&#x8bd5;&#x65f6;&#x4e0d;&#x592a;&#x65b9;&#x4fbf;&#xff0c;&#x53ef;&#x80fd;&#x4f1a;&#x9020;&#x6210;&#x5faa;&#x73af;&#x8c03;&#x7528;&#x3002;</li>
    
<li>3&#x3001;&#x53ef;&#x80fd;&#x4e0d;&#x5bb9;&#x6613;&#x89c2;&#x5bdf;&#x8fd0;&#x884c;&#x65f6;&#x7684;&#x7279;&#x5f81;&#xff0c;&#x6709;&#x788d;&#x4e8e;&#x9664;&#x9519;&#x3002;</li>
  </ul>
</blockquote></div>
<div class="section">
<h3><a name="a1.7_"></a>1.7 &#x6a21;&#x5f0f;&#x7ed3;&#x6784;</h3>

<blockquote>
<p>&#x8d23;&#x4efb;&#x94fe;&#x6a21;&#x5f0f;&#x5305;&#x542b;&#x5982;&#x4e0b;&#x89d2;&#x8272;&#xff1a;</p>
</blockquote>

<ul>
  
<li>
  
<blockquote>AbstractHandler: &#x62bd;&#x8c61;&#x5904;&#x7406;&#x8005;&#x89d2;&#x8272; &#x5b9a;&#x4e49;&#x51fa;&#x4e00;&#x4e2a;&#x5904;&#x7406;&#x8bf7;&#x6c42;&#x7684;&#x63a5;&#x53e3;&#x3002; &#x5982;&#x679c;&#x9700;&#x8981;&#xff0c;&#x63a5;&#x53e3;&#x53ef;&#x4ee5;&#x5b9a;&#x4e49; &#x51fa;&#x4e00;&#x4e2a;&#x65b9;&#x6cd5;&#x4ee5;&#x8bbe;&#x5b9a;&#x548c;&#x8fd4;&#x56de;&#x5bf9;&#x4e0b;&#x5bb6;&#x7684;&#x5f15;&#x7528;&#x3002; &#x8fd9;&#x4e2a;&#x89d2;&#x8272;&#x901a;&#x5e38;&#x7531;&#x4e00;&#x4e2a;Java&#x62bd;&#x8c61;&#x7c7b;&#x6216;&#x8005;Java&#x63a5;&#x53e3;&#x5b9e;&#x73b0;&#x3002;
  </blockquote></li>
  
<li>
  
<blockquote>ConcreteHandler: &#x5177;&#x4f53;&#x5904;&#x7406;&#x8005;&#x89d2;&#x8272; &#x5177;&#x4f53;&#x5904;&#x7406;&#x8005;&#x63a5;&#x5230;&#x8bf7;&#x6c42;&#x540e;&#xff0c;&#x53ef;&#x4ee5;&#x9009;&#x62e9;&#x5c06;&#x8bf7;&#x6c42;&#x5904;&#x7406;&#x6389;&#xff0c;&#x6216;&#x8005;&#x5c06;&#x8bf7;&#x6c42;&#x4f20;&#x7ed9;&#x4e0b;&#x5bb6;&#x3002; &#x7531;&#x4e8e;&#x5177;&#x4f53;&#x5904;&#x7406;&#x8005;&#x6301;&#x6709;&#x5bf9;&#x4e0b;&#x5bb6;&#x7684;&#x5f15;&#x7528;&#xff0c;&#x56e0;&#x6b64;&#xff0c;&#x5982;&#x679c;&#x9700;&#x8981;&#xff0c;&#x5177;&#x4f53;&#x5904;&#x7406;&#x8005;&#x53ef;&#x4ee5;&#x8bbf;&#x95ee;&#x4e0b;&#x5bb6;&#x3002;
  </blockquote></li>
</ul>
<p>![](image/chain-responsibility.png)</p></div>
<div class="section">
<h3><a name="a1.8_"></a>1.8 &#x65f6;&#x5e8f;&#x56fe;</h3></div></div>
<div class="section">
<h2><a name="a2_"></a>2 &#x4ee3;&#x7801;&#x5206;&#x6790;</h2>

<blockquote>
<p>AbstractLogger:</p>
</blockquote>

<div class="source">
<div class="source">
<pre>public abstract class AbstractLogger {

    public final static int INFO = 1;
    public final static int DEBUG = 2;
    public final static int ERROR = 3;

    protected int level;

    public AbstractLogger(int level) {
        this.level = level;
    }

    public AbstractLogger(int level, AbstractLogger nextLogger) {
        this.level = level;
        this.nextLogger = nextLogger;
    }

    @Setter
    @Getter
    //&#x8d23;&#x4efb;&#x94fe;&#x4e2d;&#x7684;&#x4e0b;&#x4e00;&#x4e2a;&#x5143;&#x7d20;
    private AbstractLogger nextLogger;

    public void logMessage(int level, String message) {
        if (this.level == level) {
            write(message);
        }
        if (nextLogger != null) {
            nextLogger.logMessage(level, message);
        }
    }

    abstract protected void write(String message);
}
</pre></div></div>

<blockquote>
<p>ConcreteLoggerDebug:</p>
</blockquote>

<div class="source">
<div class="source">
<pre>@Slf4j
public class ConcreteLoggerDebug extends AbstractLogger {

    public ConcreteLoggerDebug() {
        super(DEBUG);
    }
    @Override
    protected void write(String message) {
        log.debug(&quot;-*--*--*--*- {} -*--*--*--*--&quot;,message);
    }
}
</pre></div></div>

<blockquote>
<p>ConcreteLoggerError: </p>
</blockquote>

<div class="source">
<div class="source">
<pre>@Slf4j
public class ConcreteLoggerError extends AbstractLogger {

    public ConcreteLoggerError() {
        super(ERROR);
    }
    @Override
    protected void write(String message) {
        log.error(&quot;-*--*--*--*- {} -*--*--*--*--&quot;,message);
    }
}
</pre></div></div>

<blockquote>
<p>ConcreteLoggerInfo: </p>
</blockquote>

<div class="source">
<div class="source">
<pre>@Slf4j
public class ConcreteLoggerInfo extends AbstractLogger {

    public ConcreteLoggerInfo() {
        super(INFO);
    }
    @Override
    protected void write(String message) {
        log.info(&quot;-*--*--*--*- {} -*--*--*--*--&quot;,message);
    }
}
</pre></div></div>

<blockquote>
<p>Client :</p>
</blockquote>

<div class="source">
<div class="source">
<pre>@Slf4j
public class Client {

    private static AbstractLogger getChainOfLoggers(){

        AbstractLogger errorLogger = new ConcreteLoggerInfo();
        AbstractLogger fileLogger = new ConcreteLoggerDebug();
        AbstractLogger consoleLogger = new ConcreteLoggerError();

        errorLogger.setNextLogger(fileLogger);
        fileLogger.setNextLogger(consoleLogger);

        return errorLogger;
    }

    public static void main(String[] args) {

        AbstractLogger loggerChain = getChainOfLoggers();

        log.info(&quot;-*--*--*--*- INFO -*--*--*--*--&quot;);
        loggerChain.logMessage(AbstractLogger.INFO,
                &quot;This is an information.&quot;);

        log.info(&quot;-*--*--*--*- DEBUG -*--*--*--*--&quot;);
        loggerChain.logMessage(AbstractLogger.DEBUG,
                &quot;This is an debug level information.&quot;);

        log.info(&quot;-*--*--*--*- ERROR -*--*--*--*--&quot;);
        loggerChain.logMessage(AbstractLogger.ERROR,
                &quot;This is an error information.&quot;);
    }
}
</pre></div></div></div>
<div class="section">
<h2><a name="a3_"></a>3 &#x6a21;&#x5f0f;&#x5206;&#x6790;</h2></div>
<div class="section">
<h2><a name="a4_"></a>4 &#x5b9e;&#x4f8b;</h2></div>
<div class="section">
<h2><a name="a"></a>&#x6a21;&#x5f0f;&#x6269;&#x5c55;</h2></div>
<div class="section">
<h2><a name="a"></a>&#x603b;&#x7ed3;</h2>

<blockquote>
<p>&#x8d23;&#x4efb;&#x94fe;&#x6a21;&#x5f0f;&#x5176;&#x5b9e;&#x5c31;&#x662f;&#x4e00;&#x4e2a;&#x7075;&#x6d3b;&#x7248;&#x7684;if&#x2026;else&#x2026;&#x8bed;&#x53e5;&#xff0c;&#x5b83;&#x5c31;&#x662f;&#x5c06;&#x8fd9;&#x4e9b;&#x5224;&#x5b9a;&#x6761;&#x4ef6;&#x7684;&#x8bed;&#x53e5;&#x653e;&#x5230;&#x4e86;&#x5404;&#x4e2a;&#x5904;&#x7406;&#x7c7b;&#x4e2d;&#xff0c; &#x8fd9;&#x6837;&#x505a;&#x7684;&#x4f18;&#x70b9;&#x662f;&#x6bd4;&#x8f83;&#x7075;&#x6d3b;&#x4e86;&#xff0c;&#x4f46;&#x540c;&#x6837;&#x4e5f;&#x5e26;&#x6765;&#x4e86;&#x98ce;&#x9669;&#xff0c;&#x6bd4;&#x5982;&#x8bbe;&#x7f6e;&#x5904;&#x7406;&#x7c7b;&#x524d;&#x540e;&#x5173;&#x7cfb;&#x65f6;&#xff0c; &#x4e00;&#x5b9a;&#x8981;&#x7279;&#x522b;&#x4ed4;&#x7ec6;&#xff0c;&#x641e;&#x5bf9;&#x5904;&#x7406;&#x7c7b;&#x524d;&#x540e;&#x903b;&#x8f91;&#x7684;&#x6761;&#x4ef6;&#x5224;&#x65ad;&#x5173;&#x7cfb;&#xff0c;&#x5e76;&#x4e14;&#x6ce8;&#x610f;&#x4e0d;&#x8981;&#x5728;&#x94fe;&#x4e2d;&#x51fa;&#x73b0;&#x5faa;&#x73af;&#x5f15;&#x7528;&#x7684;&#x95ee;&#x9898;&#x3002;</p>
</blockquote></div>
      </div>
    </div>
    <div class="clear">
      <hr/>
    </div>
    <div id="footer">
      <div class="xright">
              Copyright &#169;                   2017.
          All rights reserved.    
                  </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
  </body>
</html>
