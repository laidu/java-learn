<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- Generated by Apache Maven Doxia Site Renderer 1.7.4 at 2017-11-06 -->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>io &#x2013; java NIO 学习</title>
    <style type="text/css" media="all">
      @import url("./css/maven-base.css");
      @import url("./css/maven-theme.css");
      @import url("./css/site.css");
    </style>
    <link rel="stylesheet" href="./css/print.css" type="text/css" media="print" />
    <meta http-equiv="Content-Language" content="en" />
        
        </head>
  <body class="composite">
    <div id="banner">
                    <div id="bannerLeft">
                io
                </div>
                    <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="breadcrumbs">
          
                <div class="xleft">
        <span id="publishDate">Last Published: 2017-11-06</span>
                  &nbsp;| <span id="projectVersion">Version: 1.0-SNAPSHOT</span>
                      </div>
            <div class="xright">                    <a href="./" title="io">io</a>
            
      </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="leftColumn">
      <div id="navcolumn">
           
                                <h5>Parent Project</h5>
                  <ul>
                  <li class="none">
                          <a href="../index.html" title="language-advance">language-advance</a>
            </li>
          </ul>
                       <h5>Project Documentation</h5>
                  <ul>
                                                                                                                                                                                                                                                        <li class="collapsed">
                          <a href="project-info.html" title="Project Information">Project Information</a>
                  </li>
          </ul>
                             <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
        <img class="poweredBy" alt="Built by Maven" src="./images/logos/maven-feather.png" />
      </a>
                 
            </div>
    </div>
    <div id="bodyColumn">
      <div id="contentBox">
        <h1>java NIO &#x5b66;&#x4e60;</h1>

<blockquote>
<p>java.nio &#x5305;&#x8bf4;&#x660e;</p>
  
<ul>
    
<li>
<p><b>Buffers</b> &#x4e00;&#x4e2a;&#x7528;&#x4e8e;&#x7279;&#x5b9a;&#x57fa;&#x672c;&#x7c7b;&#x578b;&#x6570;&#x636e;&#x7684;&#x5bb9;&#x5668;, &#x5bf9;&#x4e8e;&#x6bcf;&#x4e2a;&#x975e; boolean &#x57fa;&#x672c;&#x7c7b;&#x578b;&#xff0c;&#x6b64;&#x7c7b;&#x90fd;&#x6709;&#x4e00;&#x4e2a;&#x5b50;&#x7c7b;&#x4e0e;&#x4e4b;&#x5bf9;&#x5e94;;</p></li>
    
<li>
<p><b>Charsets</b> 16 &#x4f4d;&#x7684; Unicode &#x4ee3;&#x7801;&#x5355;&#x5143;&#x5e8f;&#x5217;&#x548c;&#x5b57;&#x8282;&#x5e8f;&#x5217;&#x4e4b;&#x95f4;&#x7684;&#x6307;&#x5b9a;&#x6620;&#x5c04;&#x5173;&#x7cfb;&#x3002;&#x6b64;&#x7c7b;&#x5b9a;&#x4e49;&#x4e86;&#x7528;&#x4e8e;&#x521b;&#x5efa;&#x89e3;&#x7801;&#x5668;&#x548c;&#x7f16;&#x7801;&#x5668;&#x4ee5;&#x53ca;&#x83b7;&#x53d6;&#x4e0e; charset &#x5173;&#x8054;&#x7684;&#x5404;&#x79cd;&#x540d;&#x79f0;&#x7684;&#x65b9;&#x6cd5;&#x3002;&#x6b64;&#x7c7b;&#x7684;&#x5b9e;&#x4f8b;&#x662f;&#x4e0d;&#x53ef;&#x53d8;&#x7684;&#x3002;</p></li>
    
<li>
<p><b>Channels</b> &#x7528;&#x4e8e; I/O &#x64cd;&#x4f5c;&#x7684;&#x8fde;&#x63a5;&#x3002;&#x901a;&#x9053;&#x8868;&#x793a;&#x5230;&#x5b9e;&#x4f53;&#xff0c;&#x5982;&#x786c;&#x4ef6;&#x8bbe;&#x5907;&#x3001;&#x6587;&#x4ef6;&#x3001;&#x7f51;&#x7edc;&#x5957;&#x63a5;&#x5b57;&#x6216;&#x53ef;&#x4ee5;&#x6267;&#x884c;&#x4e00;&#x4e2a;&#x6216;&#x591a;&#x4e2a;&#x4e0d;&#x540c; I/O &#x64cd;&#x4f5c;&#xff08;&#x5982;&#x8bfb;&#x53d6;&#x6216;&#x5199;&#x5165;&#xff09;&#x7684;&#x7a0b;&#x5e8f;&#x7ec4;&#x4ef6;&#x7684;&#x5f00;&#x653e;&#x7684;&#x8fde;&#x63a5;&#x3002;</p></li>
    
<li>
<p><b>Selectors</b> &#x53ef;&#x901a;&#x8fc7;&#x8c03;&#x7528;&#x6b64;&#x7c7b;&#x7684; open &#x65b9;&#x6cd5;&#x521b;&#x5efa;&#x9009;&#x62e9;&#x5668;&#xff0c;&#x8be5;&#x65b9;&#x6cd5;&#x5c06;&#x4f7f;&#x7528;&#x7cfb;&#x7edf;&#x7684;&#x9ed8;&#x8ba4;&#x9009;&#x62e9;&#x5668;&#x63d0;&#x4f9b;&#x8005;&#x521b;&#x5efa;&#x65b0;&#x7684;&#x9009;&#x62e9;&#x5668;&#x3002;</p></li>
  </ul>
</blockquote>
<div class="section">
<h2><a name="a1_Buffer_"></a>1 Buffer &#x7f13;&#x51b2;&#x533a;</h2>

<blockquote>
<p>&#x4f4d;&#x4e8e; java.nio &#x4e0b;&#xff0c;&#x4e00;&#x4e2a;&#x7528;&#x4e8e;&#x7279;&#x5b9a;&#x57fa;&#x672c;&#x7c7b;&#x578b;&#x6570;&#x636e;&#x7684;&#x5bb9;&#x5668;&#x3002;</p>
<p>&#x7f13;&#x51b2;&#x533a;&#x662f;&#x7279;&#x5b9a;&#x57fa;&#x672c;&#x7c7b;&#x578b;&#x5143;&#x7d20;&#x7684;&#x7ebf;&#x6027;&#x6709;&#x9650;&#x5e8f;&#x5217;&#x3002;&#x9664;&#x5185;&#x5bb9;&#x5916;&#xff0c;&#x7f13;&#x51b2;&#x533a;&#x7684;&#x57fa;&#x672c;&#x5c5e;&#x6027;&#x8fd8;&#x5305;&#x62ec;&#x5bb9;&#x91cf;&#x3001;&#x9650;&#x5236;&#x548c;&#x4f4d;&#x7f6e;&#xff1a;</p>
</blockquote>

<div class="source">
<div class="source">
<pre>&#x7f13;&#x51b2;&#x533a;&#x7684;&#x5bb9;&#x91cf; &#x662f;&#x5b83;&#x6240;&#x5305;&#x542b;&#x7684;&#x5143;&#x7d20;&#x7684;&#x6570;&#x91cf;&#x3002;&#x7f13;&#x51b2;&#x533a;&#x7684;&#x5bb9;&#x91cf;&#x4e0d;&#x80fd;&#x4e3a;&#x8d1f;&#x5e76;&#x4e14;&#x4e0d;&#x80fd;&#x66f4;&#x6539;&#x3002;

&#x7f13;&#x51b2;&#x533a;&#x7684;&#x9650;&#x5236; &#x662f;&#x7b2c;&#x4e00;&#x4e2a;&#x4e0d;&#x5e94;&#x8be5;&#x8bfb;&#x53d6;&#x6216;&#x5199;&#x5165;&#x7684;&#x5143;&#x7d20;&#x7684;&#x7d22;&#x5f15;&#x3002;&#x7f13;&#x51b2;&#x533a;&#x7684;&#x9650;&#x5236;&#x4e0d;&#x80fd;&#x4e3a;&#x8d1f;&#xff0c;&#x5e76;&#x4e14;&#x4e0d;&#x80fd;&#x5927;&#x4e8e;&#x5176;&#x5bb9;&#x91cf;&#x3002;

&#x7f13;&#x51b2;&#x533a;&#x7684;&#x4f4d;&#x7f6e; &#x662f;&#x4e0b;&#x4e00;&#x4e2a;&#x8981;&#x8bfb;&#x53d6;&#x6216;&#x5199;&#x5165;&#x7684;&#x5143;&#x7d20;&#x7684;&#x7d22;&#x5f15;&#x3002;&#x7f13;&#x51b2;&#x533a;&#x7684;&#x4f4d;&#x7f6e;&#x4e0d;&#x80fd;&#x4e3a;&#x8d1f;&#xff0c;&#x5e76;&#x4e14;&#x4e0d;&#x80fd;&#x5927;&#x4e8e;&#x5176;&#x9650;&#x5236;&#x3002;
</pre></div></div>

<blockquote>
<p>&#x5bf9;&#x4e8e;&#x6bcf;&#x4e2a;&#x975e; boolean &#x57fa;&#x672c;&#x7c7b;&#x578b;&#xff0c;&#x6b64;&#x7c7b;&#x90fd;&#x6709;&#x4e00;&#x4e2a;&#x5b50;&#x7c7b;&#x4e0e;&#x4e4b;&#x5bf9;&#x5e94;&#x3002;</p>
<p>&#x7c7b;&#x56fe; &#xff1a;</p>
</blockquote>
<p>![](image/buffer.png)</p>

<blockquote>
<p>Java NIO Buffers&#x7528;&#x4e8e;&#x548c;NIO Channel&#x4ea4;&#x4e92;&#x3002;&#x4ece;channel&#x4e2d;&#x8bfb;&#x53d6;&#x6570;&#x636e;&#x5230;buffers&#x91cc;&#xff0c;&#x4ece;buffer&#x628a;&#x6570;&#x636e;&#x5199;&#x5165;&#x5230;channels.</p>
<p>buffer&#x672c;&#x8d28;&#x4e0a;&#x5c31;&#x662f;&#x4e00;&#x5757;&#x5185;&#x5b58;&#x533a;&#xff0c;&#x53ef;&#x4ee5;&#x7528;&#x6765;&#x5199;&#x5165;&#x6570;&#x636e;&#xff0c;&#x5e76;&#x5728;&#x7a0d;&#x540e;&#x8bfb;&#x53d6;&#x51fa;&#x6765;&#x3002;&#x8fd9;&#x5757;&#x5185;&#x5b58;&#x88ab;NIO Buffer&#x5305;&#x88f9;&#x8d77;&#x6765;&#xff0c;&#x5bf9;&#x5916;&#x63d0;&#x4f9b;&#x4e00;&#x7cfb;&#x5217;&#x7684;&#x8bfb;&#x5199;&#x65b9;&#x4fbf;&#x5f00;&#x53d1;&#x7684;&#x63a5;&#x53e3;&#x3002;</p>
</blockquote>
<div class="section">
<h3><a name="a1.1_BufferBasic_Buffer_Usage"></a>1.1 Buffer&#x57fa;&#x672c;&#x7528;&#x6cd5;&#xff08;Basic Buffer Usage&#xff09;</h3>

<blockquote>
<p>&#x5229;&#x7528;Buffer&#x8bfb;&#x5199;&#x6570;&#x636e;&#xff0c;&#x901a;&#x5e38;&#x9075;&#x5faa;&#x56db;&#x4e2a;&#x6b65;&#x9aa4;&#xff1a;</p>
  
<ul>
    
<li>&#x628a;&#x6570;&#x636e;&#x5199;&#x5165;buffer&#xff1b;</li>
    
<li>&#x8c03;&#x7528;flip&#xff1b;</li>
    
<li>&#x4ece;Buffer&#x4e2d;&#x8bfb;&#x53d6;&#x6570;&#x636e;&#xff1b;</li>
    
<li>&#x8c03;&#x7528;buffer.clear()&#x6216;&#x8005;buffer.compact()</li>
  </ul>
<p>&#x5f53;&#x5199;&#x5165;&#x6570;&#x636e;&#x5230;buffer&#x4e2d;&#x65f6;&#xff0c;buffer&#x4f1a;&#x8bb0;&#x5f55;&#x5df2;&#x7ecf;&#x5199;&#x5165;&#x7684;&#x6570;&#x636e;&#x5927;&#x5c0f;&#x3002;&#x5f53;&#x9700;&#x8981;&#x8bfb;&#x6570;&#x636e;&#x65f6;&#xff0c;&#x901a;&#x8fc7;flip()&#x65b9;&#x6cd5;&#x628a;buffer&#x4ece;&#x5199;&#x6a21;&#x5f0f;&#x8c03;&#x6574;&#x4e3a;&#x8bfb;&#x6a21;&#x5f0f;&#xff1b;&#x5728;&#x8bfb;&#x6a21;&#x5f0f;&#x4e0b;&#xff0c;&#x53ef;&#x4ee5;&#x8bfb;&#x53d6;&#x6240;&#x6709;&#x5df2;&#x7ecf;&#x5199;&#x5165;&#x7684;&#x6570;&#x636e;&#x3002;</p>
<p>&#x5f53;&#x8bfb;&#x53d6;&#x5b8c;&#x6570;&#x636e;&#x540e;&#xff0c;&#x9700;&#x8981;&#x6e05;&#x7a7a;buffer&#xff0c;&#x4ee5;&#x6ee1;&#x8db3;&#x540e;&#x7eed;&#x5199;&#x5165;&#x64cd;&#x4f5c;&#x3002;&#x6e05;&#x7a7a;buffer&#x6709;&#x4e24;&#x79cd;&#x65b9;&#x5f0f;&#xff1a;&#x8c03;&#x7528;clear()&#x6216;compact()&#x65b9;&#x6cd5;&#x3002;clear&#x4f1a;&#x6e05;&#x7a7a;&#x6574;&#x4e2a;buffer&#xff0c;compact&#x5219;&#x53ea;&#x6e05;&#x7a7a;&#x5df2;&#x8bfb;&#x53d6;&#x7684;&#x6570;&#x636e;&#xff0c;&#x672a;&#x88ab;&#x8bfb;&#x53d6;&#x7684;&#x6570;&#x636e;&#x4f1a;&#x88ab;&#x79fb;&#x52a8;&#x5230;buffer&#x7684;&#x5f00;&#x59cb;&#x4f4d;&#x7f6e;&#xff0c;&#x5199;&#x5165;&#x4f4d;&#x7f6e;&#x5219;&#x8fd1;&#x8ddf;&#x7740;&#x672a;&#x8bfb;&#x6570;&#x636e;&#x4e4b;&#x540e;&#x3002;</p>
</blockquote></div>
<div class="section">
<h3><a name="a1.2_BufferBuffer_Capacity_Position_and_Limit"></a>1.2 Buffer&#x7684;&#x5bb9;&#x91cf;&#xff0c;&#x4f4d;&#x7f6e;&#xff0c;&#x4e0a;&#x9650;&#xff08;Buffer Capacity, Position and Limit&#xff09;</h3>

<blockquote>
<p>buffer&#x7f13;&#x51b2;&#x533a;&#x5b9e;&#x8d28;&#x4e0a;&#x5c31;&#x662f;&#x4e00;&#x5757;&#x5185;&#x5b58;&#xff0c;&#x7528;&#x4e8e;&#x5199;&#x5165;&#x6570;&#x636e;&#xff0c;&#x4e5f;&#x4f9b;&#x540e;&#x7eed;&#x518d;&#x6b21;&#x8bfb;&#x53d6;&#x6570;&#x636e;&#x3002;&#x8fd9;&#x5757;&#x5185;&#x5b58;&#x88ab;NIO Buffer&#x7ba1;&#x7406;&#xff0c;&#x5e76;&#x63d0;&#x4f9b;&#x4e00;&#x7cfb;&#x5217;&#x7684;&#x65b9;&#x6cd5;&#x7528;&#x4e8e;&#x66f4;&#x7b80;&#x5355;&#x7684;&#x64cd;&#x4f5c;&#x8fd9;&#x5757;&#x5185;&#x5b58;&#x3002;</p>
<p>&#x4e00;&#x4e2a;Buffer&#x6709;&#x4e09;&#x4e2a;&#x5c5e;&#x6027;&#x662f;&#x5fc5;&#x987b;&#x638c;&#x63e1;&#x7684;&#xff0c;&#x5206;&#x522b;&#x662f;&#xff1a;</p>
  
<ul>
    
<li>capacity&#x5bb9;&#x91cf;</li>
    
<li>position&#x4f4d;&#x7f6e;</li>
    
<li>limit&#x9650;&#x5236;</li>
  </ul>
<p>position&#x548c;limit&#x7684;&#x5177;&#x4f53;&#x542b;&#x4e49;&#x53d6;&#x51b3;&#x4e8e;&#x5f53;&#x524d;buffer&#x7684;&#x6a21;&#x5f0f;&#x3002;capacity&#x5728;&#x4e24;&#x79cd;&#x6a21;&#x5f0f;&#x4e0b;&#x90fd;&#x8868;&#x793a;&#x5bb9;&#x91cf;&#x3002;</p>
</blockquote></div></div>
<div class="section">
<h2><a name="a2_Channels"></a>2 Channels</h2></div>
<div class="section">
<h2><a name="a3_Selectors"></a>3 Selectors</h2></div>
      </div>
    </div>
    <div class="clear">
      <hr/>
    </div>
    <div id="footer">
      <div class="xright">
              Copyright &#169;                   2017.
          All rights reserved.    
                  </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
  </body>
</html>
